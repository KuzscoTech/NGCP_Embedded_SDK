#ifndef DRIVEMOTOR_UTILITIES_H
#define DRIVEMOTOR_UTILITIES_H

#include "motorEncoder.h"
#include "motorPWM.h"
#include "pid.h"
#include "xparameters.h"
#include "arm0.h"

// -> drive motor PID parameters
#define DRIVEMOTOR_PID_KP           0.5f
#define DRIVEMOTOR_PID_KI           1.0f
#define DRIVEMOTOR_PID_KD           0.1f
#define DRIVEMOTOR_PID_TAU          0.02f
#define DRIVEMOTOR_PID_LIM_MIN      0.0f
#define DRIVEMOTOR_PID_LIM_MAX      255.0f
#define DRIVEMOTOR_PID_SAMPLE_TIME  0.01f // seconds
#define DRIVEMOTOR_PID_LIM_MIN_INT -500.0f
#define DRIVEMOTOR_PID_LIM_MAX_INT  500.0f

/* Drive Motor struct */
typedef struct{
	_Bool setDir;      // set motor direction
	float setRpm;      // set motor rpm
	//
	_Bool currentDir;  // actual motor direction
	float currentRpm;  // actual motor rpm
	//
	float pid_setPoint; // pid speed setpoint
} ugv_driveMotor;

int driveMotor_Initialize(ugv_driveMotor *InstancePtr);


#endif
