#ifndef SERVOMOTOR_UTILITIES_H
#define SERVOMOTOR_UTILITIES_H

#include "xparameters.h"
#include "xsysmon.h"
#include "servoz3.h"
#include "math.h"


/* SERVO DEFINITIONS */
#define SERVO_BASEADDR         XPAR_SERVOZ3_S00_AXI_BASEADDR
#define SERVO_XADC_BASEADDR

/* SERVO PID PARAMETERS */
#define SERVO_PID_KP           0.5f
#define SERVO_PID_KI           1.0f
#define SERVO_PID_KD           0.1f
#define SERVO_PID_TAU          0.02f
#define SERVO_PID_LIM_MIN      0.0f
#define SERVO_PID_LIM_MAX      255.0f
#define SERVO_PID_SAMPLE_TIME  0.01f // seconds
#define SERVO_PID_LIM_MIN_INT -500.0f
#define SERVO_PID_LIM_MAX_INT  500.0f

/* Servo Motor Struct */
typedef struct{
	float         currentPos;
	float         setPos;
	//
	ugv_servo     pwm;
	XSysMon       adc;
	PIDController pid;
};

#endif
